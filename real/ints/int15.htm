<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Низкоуровневое програмирование</title>
	<meta name="keywords" content="программирование BIOS INT INT15 реальный режим ассемблер 16bit" />
	<meta name="description" content="Низкоуровневое программирование: Прерывания БИОС: INT 15" />
</head>
<body>
	<a href=../../index.htm>Главная</a> - <a href=../index.htm> Реальный режим </a> - <a href=int.htm>Прерывания Bios</a> - <b>INT 15h: Дополнительные функции.</b><br />
	<h2>INT 15h: Дополнительные функции.</h2>
<table border=1 width=100%><tr><td>AH</td><td>Функция</td></tr><tr><td valign=top>
  00h</td><td>Включить мотор кассетного привода.<br />
	Выход:<br />
	AH!=86 , иначе касетный привод не найден.</td></tr><tr><td colspan=2 align="center">
	<a href=15/cas.htm>прочие кассетные функции</a></td></tr><tr><td valign=top>
  04h</td><td> Создать таблицу системных параметров ABIOS<br />
	Выход:<br />
	CF установлен - ошибка, иначе - успешно.</td></tr><tr><td valign=top>
  05h</td><td> Создать таблицу инициализации ABIOS<br />
	Выход:<br />
	CF установлен - ошибка, иначе - успешно.</td></tr><tr><td valign=top>
  22h</td><td> Получить расположение ROM BASIC<br />
	Выход:<br />
	CF установлен - ошибка (если AH=86h, то функция не поддерживается)
	Если AX=0000, то ES:BX - расположение ROM BASIC в памяти.</td></tr><tr><td valign=top>
  52h</td><td>Извлечь носитель информации<br />
	<b>Вход:</b><br />
	DL - номер диска(80h ... 0FFh)<br /><br />
	<b>Выход:</b><br />
	AH - состояние дисковой подсистемы<br />
	Если флаг переноса установлен - произошла ошибка<br /><br />
	<b>Примечание:</b><br />
	Эта функция относится к стандарту EDD. Подробнее про этот стандарт вы можете узнать на странице <a href=int13.htm#EDD>прерывания 13h</a></td></tr><tr><td valign=top>
  80h</td><td>Открыть устройство.<br />
	<font color=red><b>Только AT-совместимые компьютеры</b></font><br/>
	По умолчанию, ничего не делает (зарезервированна для многозадачных ОС реального времени)<br />
	вход: BX = ID устройства<br />
	CX = ID процесса (не уверен в необходиости этого параметра, взял из онлайна)</td></tr><tr><td valign=top>
  81h</td><td>Закрыть устройство.<br />
	<font color=red><b>Только AT-совместимые компьютеры</b></font><br/>
	Возможно, необходимо для корректной работы устройства после вас, хотя толком ничего не делает<br />
	вход: BX = ID устройства</td></tr><tr><td valign=top>
  82h</td><td>завершить программу устройства.<br />
	<font color=red><b>Только AT-совместимые компьютеры</b></font><br/>
	Назанчение данной функции неизвестно<br />
	вход: BX = ID устройства</td></tr><tr><td valign=top>
  83h</td><td>Ждать события. Запустить таймер и установить флаг по истечении интервала.<br />
	<font color=red><b>Только AT-совместимые компьютеры</b></font><br/>
	вход: AL = код подфункции:<br/>
	&nbsp;&nbsp;AL = 0: уст. интервал (и запустить таймер)<br/>	&nbsp;&nbsp;&nbsp;&nbsp;ES:BX = адрес пользовательского байта. бит 7 в этом байте будет включен по истечении интервала.<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;CX,DX = длина интервала в микросекундах (CX - старшая часть)<br/>
	&nbsp;&nbsp;AL = 1: отменить ожидание события.</td></tr><tr><td valign=top>
  84h</td><td>Обеспечение джойстика (вероятно, подключённого через стандартный (и безнадёжно устаревший) игровой порт).<br/>
	<font color=red><b>Только AT-совместимые компьютеры</b></font><br/>
	вход: DX = код подфункции:<br/>
	<table width=100% border=1><tr><td>DX</td><td></td></tr><tr><td valign=top>
	0</td><td> читать текущие переключатели<br/>
	возврат: AL = значения переключателей (биты 7-4)</td></tr><tr><td valign=top>
	1</td><td> читать входы X,Y джойстика<br/>
	возврат: AX = джойстик 'A', значение X (горизонталь)<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;AX = джойстик 'A', значение Y (вертикаль)<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;AX = джойстик 'B', значение X (горизонталь)<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;AX = джойстик 'B', значение Y (вертикаль)</td></tr></table></td></tr><tr><td valign=top>
  85h</td><td>клавиша SysReq.вызывается прерыванием <a href=int9.htm>INT 09H</a> при нажатии и отпускании клавиши SysReq.<br/>
	<font color=red><b>Только AT-совместимые компьютеры</b></font><br/>
	Эта функция ничего не делает.  Идея состоит в том, чтобы операционная система перехватывала INT 15h и выдавала подфункцию 85h, чтобы отслеживать состояние (нажата или отпущена) клавиши SysReq.<br/>
	вход: AL = 0: SysReq нажата ('make')<br/>
	AL = 1: SysReq отпущена ('break')</td></tr><tr><td valign=top>
  86h</td><td>Ждать.<br/>
	<font color=red><b>Только AT-совместимые компьютеры</b></font><br/>
	Циклит с разрешенными прерываниями до истечения интервала времени.<br/>
    <b>Вход:</b><br />
	CX:DX = сколько микросекунд (миллион = 1 секунда) ждать до возврата к программе (СХ - старшее слово)<br />
	<b>Примечание:</b>
	На многих старых компьютерах было невозможно достичь точности, предусмотренной описанием функции, по этому не реккомендуется указывать в качестве задержки значения меньше 1000 микросекунд (3e8h)</td></tr><tr><td valign=top>
  87h</td><td>Переслать блок extended-памяти.
	<font color=red><b>Только AT-совместимые компьютеры с процессором 286 и выше</b></font><br/>
	вход: ES:SI => таблица глобальных дескрипторов (GDT) - см. ниже.<br/>
	CX = размер блока (максимум 8000h т.е. 32 кб.)<br/>
	ES:SI = GDT<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;db 16 dup (0) 16 пустых байтов<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;dw ? &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;размер источника в байтах (2*[сх]+1)<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;dw ? &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;младшая часть адреса источника<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;db ? &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;старшая часть адреса источника<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;db 93h &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;разрешены чтение и запись<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;dw 0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;пустое (резервное) слово<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;dw ? &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;размер приемника в байтах (2*[сх]+1)<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;dw ? &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;младшая часть адреса приемника<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;db ? &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;старшая часть адреса приемника<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;db 93h &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;разрешены чтение и запись<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;dw 0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;пустое (резервное) слово<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;db 16 dup (0) 16 пустых байтов<br/>
	замечание: прерывания запрещаются в процессе перемещения данных, так что, если вы запускаете пачку конкурирующих процессов асинхронной передачи, избегайте перемещения больших объемов данных.</td></tr><tr><td valign=top>
  <a name=88>88h</a></td><td>размер extended-памяти.<br/>
	<font color=red><b>Только AT-совместимые компьютеры(не более 15 иб)</b></font><br/>
	выход: AX = число непрерывных 1K блоков сверх 1M (1024K)</td></tr><tr><td valign=top>
  89h</td><td>Войти в режим Protected (286 Virtual memory). это полезная штука, если вы не знаете, что это за зверь - Protected Mode i286.<br/>
	вход: ES:SI => 8-элементная таблица глобальных дексрипторов (GDT) (ниже)<br/>
	BH = смещение в IDT начала первых 8 аппаратных прерываний<br/>
	BL = смещение в IDT начала вторых 8 аппаратных прерываний<br/>
	выход: AH = 0, если не было ошибок все сегментные регистры изменяются. AX и BP теряются. 80286 входит в режим Protected без прямого выхода в режим Real.<br />
    структура GDT:<br/>
	ES:[SI]+00h &nbsp;фиктивный дескриптор &nbsp;&nbsp;&nbsp;&nbsp;(все нули)<br/>
	ES:[SI]+08h &nbsp;дескриптор этой GDT &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(инициализирует пользователь)<br/>
	ES:[SI]+10h &nbsp;дескриптор для IDT &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(инициализирует пользователь)<br/>
	ES:[SI]+18h &nbsp;дескриптор для caller DS (инициализирует пользователь)<br/>
	ES:[SI]+20h &nbsp;дескриптор для caller ES (инициализирует пользователь)<br/>
	ES:[SI]+28h &nbsp;дескриптор для caller SS (инициализирует пользователь)<br/>
	ES:[SI]+30h &nbsp;дескриптор для caller CS (инициализирует пользователь)<br/>
	ES:[SI]+38h &nbsp;временный BIOS CS &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(все нули)<br/>
	описание дискриптора будет в разделе типы данных.</td></tr><tr><td valign=top>
 <a name=90>90h</a></td><td>Цикл занятости устройства.<br/>
	<font color=red><b>Только AT-совместимые компьютеры</b></font><br/>
	Ничего не делает. Вроде как. Я полагаю, что вы можете перехватывать эту функцию и заставить ее что-то делать. Если пишете свою ось.<br/>
	вход: AL = код типа устройства<br/>
	00h = твердый диск<br/>
	01h = дискета<br/>
	02h = клавиатура<br/>
	80h = сеть<br/>
	ES:BX => управляющий блок сети<br/>
	FDh = запуск мотора дискеты<br/>
	FEh = принтер</td></tr><tr><td valign=top>
  91h</td><td>завершить прерывание.<br/>
	<font color=red><b>Только AT-совместимые компьютеры</b></font><br/>
	Ничего не делает. Идея здесь - предоставить механизм для обработчика устройства, чтобы проверять занятость устройства. когда обработчик завершил обработку запроса, он может использовать эту функцию, чтобы дать знать системе, что устройство свободно.<br/>
	вход: AL = код типа устройства (см. подфункцию <a href=#90>90H</a>)<br/>
	AL = 00H - 7Fh: последовательно используемые устройства<br/>
	AL = 80H - BFh: реентерабельные устройства (ES:BX => пакет данных)</td></tr><tr><td valign=top>
	<a name=c0>C0h</a></td><td> Адрес таблицы конфигурации<br />
	На выходе:      ES:BX = адрес таблицы конфигурации, таблица находится в ПЗУ BIOS;<br />
	&nbsp;&nbsp;CF = 0 и AH = 0 при успешном вызове прерывания;<br />
	&nbsp;&nbsp;CF = 1 и AH=86h или AH=80h если данная версия BIOS не поддерживает функцию C0h.<br />
	формат таблицы:
	<table border=1 width=100%>
	<tr><td>Смещение</td><td>Размер</td><td>Описание</td></tr><tr><td valign=top>
	00h</td><td>2 байта</td><td>размер таблицы минус 2 байта</td></tr><tr><td valign=top>
	02h</td><td>1 байт</td><td>код модели компьютера</td></tr><tr><td valign=top>
	03h</td><td>1 байт</td><td>суб-код модели компьютера</td></tr><tr><td valign=top>
	04h</td><td>1 байт</td><td>номер ревизии BIOS минус 1</td></tr><tr><td valign=top>
	05h</td><td>1 байт</td><td>
	    <table border=1 width=100%><tr><td>
	    бит</td><td>Описание</td></tr><tr><td valign=top>
	    0</td><td>В системе установлена двойная шина (ISA + Micro Chanel)</td></tr><tr><td valign=top>
	    1</td><td>Всистеме установлена шина Micro Chanel</td></tr><tr><td valign=top>
	    2</td><td>Биос занимает дополнительную область памяти (EBDA)</td></tr><tr><td valign=top>
	    3</td><td>Функция 41h прерывания 15h поддерживается</td></tr><tr><td valign=top>
	    4</td><td>Прерывание 09h вызывает функцию 41h прерывания 15h</td></tr><tr><td valign=top>
	    5</td><td>Присутствуют часы реального времени</td></tr><tr><td valign=top>
	    6</td><td>Установлен второй контроллер прерывания 8259</td></tr><tr><td valign=top>
	    7</td><td>Третий DMA конал занят BIOS</td></tr>
	    </table>
	</td></tr><tr><td valign=top>
	06h</td><td>1 байт</td><td>
	    <table border=1 width=100%><tr><td>
	    бит</td><td>Описание</td></tr><tr><td valign=top>
	    0</td><td>Резерв</td></tr><tr><td valign=top>
	    1</td><td>Поддерживается потоковая передача данных</td></tr><tr><td valign=top>
	    2</td><td>Используется НЕ 8042 контроллер клавиатуры</td></tr><tr><td valign=top>
	    3</td><td>Функция C8h прерывания 15h поддерживается</td></tr><tr><td valign=top>
	    4</td><td>Функция C7h прерывания 15h поддерживается</td></tr><tr><td valign=top>
	    5</td><td>Функция C6h прерывания 15h поддерживается</td></tr><tr><td valign=top>
	    6</td><td>Функция <a href=int16.htm#9>09 прерывания 16h</a> поддерживается<br /><font color=red>Некорректно устанавливается некоторыми БИОС</font></td></tr><tr><td valign=top>
	    7</td><td>Присутствует 32-х битный контроллер DMA</td></tr>
	    </table>
	</td></tr><tr><td valign=top>
	07h</td><td>1 байт</td><td>
	    <table border=1 width=100%><tr><td>
	    бит</td><td>Описание</td></tr><tr><td valign=top>
	    0</td><td>SCSI поддерживается в IML</td></tr><tr><td valign=top>
	    1</td><td>IML система</td></tr><tr><td valign=top>
	    2</td><td>Подключена информационная панель</td></tr><tr><td valign=top>
	    3</td><td>Присутствует SCSI контроллер</td></tr><tr><td valign=top>
	    4</td><td>POST поддерживает включение\выключение ROM-TO-RAM</td></tr><tr><td valign=top>
	    5</td><td>Резерв</td></tr><tr><td valign=top>
	    6</td><td>Резерв</td></tr><tr><td valign=top>
	    7</td><td>Резерв</td></tr>
	    </table>
	</td></tr><tr><td valign=top>
	08h</td><td>1 байт</td><td>
	    <table border=1 width=100%><tr><td>
	    бит</td><td>Описание</td></tr><tr><td valign=top>
	    0</td><td>POST поддерживает POSTEXT</td></tr><tr><td valign=top>
	    1</td><td>система поддерживает разделение памяти на 16M</td></tr><tr><td valign=top>
	    2</td><td>Резерв</td></tr><tr><td valign=top>
	    3-5</td><td>001 - ABIOS НЕ поддерживается<br />010 - ABIOS поддерживается из ROM<br />011 - ABIOS поддерживается, но необходима загрузка в RAM.<br />111 - ABIOS присутствует<br /></td></tr><tr><td valign=top>
	    6</td><td>В системе присутствует EEPROM</td></tr><tr><td valign=top>
	    7</td><td>(занято IBM)</td></tr>
	    </table>
	</td></tr><tr><td valign=top>
	09h</td><td>1 байт</td><td>
	    <table border=1 width=100%><tr><td>
	    бит</td><td>Описание</td></tr><tr><td valign=top>
	    0</td><td>flash EPROM BIOS</td></tr><tr><td valign=top>
	    1</td><td>Система имеет расширеный режим мыши.</td></tr><tr><td valign=top>
	    4-2</td><td>Резерв</td></tr><tr><td valign=top>
	    5-7</td><td>(занято IBM)</td></tr>
	    </table>
	</td></tr><tr><td valign=top>
	0Ah - далее</td><td>&nbsp;</td><td><a href=15\spbios.htm>область данных, смысл которых зависит от производителя.</a></td></tr>
	</table>
	</td></tr><tr><td valign=top>
  C1h</td><td> Получить сегмент дополнительной области памяти BIOS (EBDA)<br/>
	Выход:<br/>
	Если CF установлен: ошибка (AH=80h или AH=86h - данная функция не поддерживается)<br/>
	Если CF сброшен: ES - сегмент EBDA
	</td></tr><tr><td valign=top>
  C2h</td><td> BIOS - интерфейс указывающего устройства<br/>
	<table border=1 width=100%><tr><td>
	AL</td><td>Функция</td></tr><tr><td valign=top>
	0</td><td>Включить/Выключить<br/>
	Вход:<br/>
	BH = 00 - выключить<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;= 01 - включить<br/>
	Выход:<br/>
	Если CF установлен: ошибка <br/>
	&nbsp;&nbsp;&nbsp;&nbsp;Значения AH в этом случае:<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;01h - функция не поддерживается<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;02h - неверный параметр<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;03h - ошибка интерфейса PS/2<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;04h - необходимо повторить операцию<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;05h - отсутствует драйвер мыши<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;80h или 86h - данная функция не поддерживается<br/>
	Если CF сброшен: успех, AH установлен в ноль.
	</td></tr><tr><td valign=top>
	1</td><td>Сбросить мышь<br/>
	Выход:<br/>
	Если CF установлен: ошибка <br/>
	&nbsp;&nbsp;&nbsp;&nbsp;Значения AH в этом случае:<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;01h - функция не поддерживается<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;03h - ошибка интерфейса PS/2<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;04h - необходимо повторить операцию<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;05h - отсутствует драйвер мыши<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;80h или 86h - данная функция не поддерживается<br/>
	Если CF сброшен: успех, AH установлен в ноль.<br/>
	BH = ID устройства(обычно нуль)<br/>
	BL = код, возврашаемый устройством при перенастройке. (AAh - большинство PS/2 мышей)<br/><br/>
	Примечания:<br/>
	Параметры по умолчанию:<br/>
	Выключено<br/>
	Частота - 100 Гц<br/>
	Чуствительность - 4 отсечки на миллиметр<br/>
	Масштаб 1:1<br/><br/>
	Рекомендуется вызывать при завершении программы если использовались какие-либо из подфункций функции C2h
	</td></tr><tr><td valign=top>
	2</td><td>Установить частоту<br/>
	Вход:<br/>
	BH - чатота:<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;0 - 10 Гц<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;1 - 20 Гц<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;2 - 40 Гц<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;3 - 60 Гц<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;4 - 80 Гц<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;5 - 100 Гц<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;6 - 200 Гц<br/><br/>
	Выход:<br/>
	Если CF установлен: ошибка <br/>
	&nbsp;&nbsp;&nbsp;&nbsp;Значения AH в этом случае:<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;01h - функция не поддерживается<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;03h - ошибка интерфейса PS/2<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;04h - необходимо повторить операцию<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;05h - отсутствует драйвер мыши<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;80h или 86h - данная функция не поддерживается<br/>
	Если CF сброшен: успех, AH установлен в ноль.
	</td></td><tr><td valign=top>
	3</td><td>Установить чуствительность<br/>
	Вход:<br/>
	BH - чуствительность:<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;00 - одна отсечка на милиметр<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;01 - две отсечки на милиметр<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;02 - 4 отсечки на милиметр<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;03 - 8 отсечек на милиметр<br/><br/>
	Выход:<br/>
	Если CF установлен:  ошибка <br/>
	&nbsp;&nbsp;&nbsp;&nbsp;Значения AH в этом случае:<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;01h - функция не поддерживается<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;03h - ошибка интерфейса PS/2<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;04h - необходимо повторить операцию<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;05h - отсутствует драйвер мыши<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;80h или 86h - данная функция не поддерживается<br/>
	Если CF сброшен: успех, AH установлен в ноль.
	</td></tr><tr><td valign=top>
	04</td><td>Получить ID<br/>
	Выход:<br/>
	Если CF установлен: ошибка <br/>
	&nbsp;&nbsp;&nbsp;&nbsp;Значения AH в этом случае:<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;01h - функция не поддерживается<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;03h - ошибка интерфейса PS/2<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;04h - необходимо повторить операцию<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;05h - отсутствует драйвер мыши<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;80h или 86h - данная функция не поддерживается<br/>
	Если CF сброшен: успех, AH установлен в ноль
	BH = ID устройства
	</td></tr><tr><td valign=top>
	05</td><td> Инициализация<br/>
	Вход:<br/>
	BH - размер пакета данных (от 1 до 8, в байтах)<br/><br/>
	Выход:<br/>
	Если CF установлен:  ошибка <br/>
	&nbsp;&nbsp;&nbsp;&nbsp;Значения AH в этом случае:<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;01h - функция не поддерживается<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;03h - ошибка интерфейса PS/2<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;04h - необходимо повторить операцию<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;05h - отсутствует драйвер мыши<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;80h или 86h - данная функция не поддерживается<br/>
	Если CF сброшен: успех, AH установлен в ноль.<br /><br />
	Примечания:<br/>
	Параметры устанавливаются следующим образом:<br/>
	Выключено<br/>
	Частота - 100 Гц<br/>
	Чуствительность - 4 отсечки на миллиметр<br/>
	Масштаб 1:1
	</td></tr><tr><td valign=top>
	06</td><td> Дополнительные возможности
		<table border=1 width=100%><tr><td>BH</td><td>Подфункция</td></tr><tr><td valign=top>
		0</td><td> Получить параметры устройства<br/>
		Выход:<br/>
		BL - статус:<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;бит 0 - нажата правая клавиша<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;бит 1 - нажата средняя клавиша<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;бит 2 - нажата левая клавиша<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;бит 3 - резерв<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;бит 4 - масштаб 0 - 1:1, 1 - 2:1  (в некоторых источниках указано строго наоборот, что верно - не знаю)<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;бит 5 - состояние 0 - выключено, 1 - включено<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;бит 6 - 0 - потоковый режим, 1 - удалённый (remote) режим<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;бит 7 - резерв<br/>
		CL - чуствительность:<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;00 - одна отсечка на милиметр<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;01 - две отсечки на милиметр<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;02 - 4 отсечки на милиметр<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;03 - 8 отсечек на милиметр<br/>
		DL - частота:<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;0 - 10 Гц<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;1 - 20 Гц<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;2 - 40 Гц<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;3 - 60 Гц<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;4 - 80 Гц<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;5 - 100 Гц<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;6 - 200 Гц<br/><br/>
		</td></tr><tr><td valign=top>
		02</td><td> Установить масштаб 1:1</td></tr><tr><td valign=top>
		03</td><td> Установить масштаб 2:1
		</td></tr></table>
	Выход:<br/>
	Если CF установлен: ошибка <br/>
	&nbsp;&nbsp;&nbsp;&nbsp;Значения AH в этом случае:<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;01h - функция не поддерживается<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;03h - ошибка интерфейса PS/2<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;04h - необходимо повторить операцию<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;05h - отсутствует драйвер мыши<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;80h или 86h - данная функция не поддерживается<br/>
	Если CF сброшен: успех, AH установлен в ноль.
	</td></tr><tr><td valign=top>
	07</td><td> Установить свой обработчик событий<br/>
	Вход:<br/>
	ES:BX - адрес обработчика (если адрес установлн в ноль, то испольуется стандартный обработчик)<br/><br/>
	Выход:<br/>
	Если CF установлен: ошибка <br/>
	&nbsp;&nbsp;&nbsp;&nbsp;Значения AH в этом случае:<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;01h - функция не поддерживается<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;03h - ошибка интерфейса PS/2<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;04h - необходимо повторить операцию<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;05h - отсутствует драйвер мыши<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;80h или 86h - данная функция не поддерживается<br/>
	Если CF сброшен: успех, AH установлен в ноль.<br/><br/>
	Примечания:<br/>
	Параметры передаются через стек:<br/>
	Слово 1 - статус:<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;бит 0 - нажата правая клавиша<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;бит 1 - нажата средняя клавиша<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;бит 2 - нажата левая клавиша<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;бит 3 - резерв<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;бит 4 - масштаб 0 - 1:1, 1 - 2:1  (в некоторых источниках указано строго наоборот, что верно - не знаю)<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;бит 5 - состояние 0 - выключено, 1 - включено<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;бит 6 - 0 - потоковый режим, 1 - удалённый (remote) режим<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;бит 7 - резерв<br/>
	Слово 2 - старший байт - знак, младший - координата X<br/>
	Слово 3 - старший байт - знак, младший - координата Y<br/>
	Слово 4 - обычно ноль, для но в случае если подключена трехкоординатная мышь используется для передачи координаты Z по аналогии со словами 2 и 3
	</td></tr><tr><td valign=top>
	08</td><td> Отправить байт на указывающее устройство</br>
	Вход:</br>
	BL - отправляемый байт
	</td></tr><tr><td valign=top>
	09</td><td> Получить данные с указывающего устройства</br>
	Выход:</br>
	BL - Первый считанный байт</br>
	CL - Второй считанный байт</br>
	DL - Третий считанный байт
	</td></tr></table>
	</td></tr><tr><td valign=top>
  <a name=e8>e8h</a></td><td>Память
	<table width=100% border=1><tr><td>AL</td><td>функция</td></tr><tr><td valign=top>
	10h</td><td>размер extended-памяти.<br/>
	Выход: <br/>
	cx - размер сконфигурированный расширенной памяти в килобайтах до 16Мб<br/>
	dx - размер сконфигурированной расширенной памяти в блоках по 64Кб свыше 16Мб</td></tr><tr><td valign=top>
	20h</td><td>карта памяти разбитая на блоки разных типов. допускает дыры в памяти.<br/>
	Вход:<br/>
	edx = 534d4150h ('SMAP');<br/>
	ebx - Смещение от начала карты памяти(0 - начать с начала)<br/>
	eсx - Размер буфера;<br/>
	es:di - Адрес буфера для размещения карты памяти;<br/>
	Выход :<br/>
	eax - 534d4150h ('SMAP');<br/>
	ebx - Следующее смещение от начала карты памяти, если = 0, то вся карта передана;<br/>
	ecx - Количество возвращенных байт;<br /><br />
	Примечание:<br />
	Эта функция не включает информацию о области памяти, адресуемой в графеческую карту</td></tr></table></td></tr>
	</table>
</body>
</html>