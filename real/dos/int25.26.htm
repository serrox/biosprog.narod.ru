<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Низкоуровневое програмирование</title>
	<meta name="keywords" content="программирование DOS INT25 INT26 реальный режим ассемблер дисковый ввод/вывод" />
	<meta name="description" content="Низкоуровневое программирование: Прерывания DOS: INT 25h INT 26h: Прямая дисковая операция чтения/записи." />
</head>
<body>
	<a href=../../index.htm>Главная</a> - <a href=../index.htm> Реальный режим </a> - <a href=ints.htm>Прерывания DOS</a> - <b>INT 25/26h: Прямая дисковая операция чтения/записи.</b><br />
	<h2>INT 25/26h: Прямая дисковая операция чтения/записи.</h2>
<b>Вход</b><br /> 
AL = номер диска (0=A, 1=B, и т.д.) <br />
CX = счетчик считываемых или записываемых секторов <br />
DX = начальный сектор (логический номер сектора DOS) <br />
DS:BX = адрес данных (исходный или целевой буфер) <br />
<br />
<b>Выход</b> 
AX = код ошибки, если взведен флаг переноса (CF=1) (см. ниже)<br /> 
значения всех регистров портятся, за исключением DS,ES,SS,SP<br /><font color=red> ВАЖНО: эти функции оставляют одно лишнее слово в стеке</font> <br />
Этот сервис DOS предоставляет прямой доступ к любому сектору диска, доступному через DOS-BIOS или устанавливаемые драйверы устройств. <br />
<br />
INT 25h читает секторы <br />
INT 26h записывает секторы <br />
Логические секторы DOS начинаются с корневого сектора . первый сектор в разделе DOS - это логический сектор 0. номера логических секторов возрастают сначала для каждого сектора на цилиндре, затем по каждой головке, и наконец по каждому цилиндру на устройстве. <br />
<br />
Заметьте, что Главная корневая запись и любые другие секторы вне раздела DOS недоступны через этот сервис. прерывание INT 13h - это единственный сервис, который предоставляет полный доступ к любой части твердого диска. <br />
<br />
<b>Ошибки</b><br /> 
Ошибки, возникающие в процессе INT 25H/26H, НЕ обрабатываются обработчиком кртических ошибок INT 24h. при выходе из INT 25h/26h, DOS-BIOS взводит флаг переноса (CF=1), когда встречается ошибка. Если установлен флаг CF: <br />
AL = ошибка устройства (0-0Ch) - аналогично битам 0-7 в DI для INT 24h - это <br />
AL = один из кодов ошибок 13h-1Fh (без 13h) в списке кодов ошибок DOS <br />
<table border=1 width=100%><tr><td>AH</td><td>Смысл</td></tr>
<tr><td>80h</td><td>attachment failed to respond</td></tr>
<tr><td>40h</td><td>ошибка операции поиска на диске</td></tr> 
<tr><td>08h</td><td>неверная контрольная сумма (CRC) при чтении дискеты </td></tr>
<tr><td>04h</td><td>запрошенный сектор не найден </td></tr>
<tr><td>03h</td><td>попытка записи на защищенную от записи дискету </td></tr>
<tr><td>02h</td><td>ошибка, отличная от перечисленных выше </td></tr></table>
<b>Замечание:</b>
Не следует предполагать, что сектор содержит ровно 512 байт. Используйте функции 1Ch или 32h либо прочитайте корневой сектор, чтобы определить истинный размер секторов. <br /><br />
</body>
</html>