<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Низкоуровневое програмирование</title>
	<meta name="keywords" content="программирование, DOS, int 21h, прерывание, AH=4Bh, AX=4B00h, выполнить, exec" />
	<meta name="description" content="Int 21h fn 4Bh" />
</head>
<body>
	<a href=../../../index.htm>Главная</a> - <a href=../../index.htm> Реальный режим </a> - <a href=../ints.htm>Прерывания DOS</a> - <a href=index.htm>INT 21h: Сервис DOS.</a> - <b>Функция 4Bh: Выполнить или загрузить программу.</b><br />
	<h2>Функция 4Bh: Выполнить или загрузить программу.</h2>
	<b>Вход:</b><br />
	AH = 4Bh<br />
	AL - действие:<br />
	0 - загрузить и выполнить<br />
	1 - загрузить<br />
	3 - загрузить оверлей<br />
	4 - загрузить и выполнять в фоне (Европейский MS-DOS4)<br />
	DS:ВX - указатель на строку с полным путём к исполняемому файлу.<br />
	ES:BX - указатель на таблицу параметров<br /><br />
	<b>Выход:</b><br />
	если CF установлен - AX = код ошибки<br />
	если CF сброшен - операция выполнена успешно<br /><br />
	<b>Примечание:</b><br />
	функция может изменить значение регистров BX и DX<br />
	Коды ошибок:<br />
	1 - неправильный номер подфункции<br />
	2 - файл не найден<br />
	5 - ошибка диска<br />
	8 - недостаточно памяти<br />
	10 - ошибка переменных среды<br />
	11 - неверный формат файла<br /><br />
	<b>Подфункция 5</b><br />
	Так же эта функция имеет специальную подфункцию с номером 5<br />
	<b>Вход:</b><br />
	AH = 4Bh<br />
	AL = 5<br />
	DS:DX - указатель на структуру состояния выполнения<br />
	<b>Выход:</b><br />
	если CF установлен - AX = код ошибки<br />
	если CF сброшен - операция выполнена успешно, AX=0<br /><br />
	<b>Примечание:</b><br />
	После выхода из этой функции переключатель A20 находится в состоянии, запрещающем читать высокие адреса<br />
	<font color=red>DOS 5.0+</font><br />
	Структура состояния программы:<br />
	<table border=1><tr><td>смещение</td><td>размер</td><td>смысл</td></tr><tr><td>
	0</td><td>2 байта</td><td>резерв</td></tr><tr><td>
	2</td><td>2 байта</td><td>тип: 0=.exe, 1=оверлей</td></tr><tr><td>
	4</td><td>4 байта</td><td>указатель на строку с полным именем исполняемого файла</td></tr><tr><td>
	8</td><td>2 байта</td><td>сегмент PSP программы</td></tr><tr><td>
	0Ah</td><td>4 байта</td><td>точка входа</td></tr><tr><td>
	0Eh</td><td>4 байта</td><td>Размер программы в памяти, включая PSP</td></tr></table>
</body>
</html>
